# Current Architecture Overview

## A. ğŸ“ Current Project Structure

```
.
â”œâ”€â”€ SUPABASE_SETUP.md
â”œâ”€â”€ attached_assets/
â”‚   â”œâ”€â”€ prompts_and_docs/
â”‚   â”œâ”€â”€ images/
â”‚   â””â”€â”€ stock_images/
â”œâ”€â”€ client/
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â””â”€â”€ favicon.png
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ App.tsx
â”‚       â”œâ”€â”€ components/
â”‚       â”œâ”€â”€ hooks/
â”‚       â”œâ”€â”€ index.css
â”‚       â”œâ”€â”€ lib/
â”‚       â”œâ”€â”€ main.tsx
â”‚       â””â”€â”€ pages/
â”œâ”€â”€ components.json
â”œâ”€â”€ design_guidelines.md
â”œâ”€â”€ drizzle.config.ts
â”œâ”€â”€ package.json
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ postcss.config.js
â”œâ”€â”€ replit.md
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ auth.ts
â”‚   â”œâ”€â”€ blockchain.ts
â”‚   â”œâ”€â”€ carbonCalculation.ts
â”‚   â”œâ”€â”€ db.ts
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ objectAcl.ts
â”‚   â”œâ”€â”€ objectStorage.ts
â”‚   â”œâ”€â”€ routes.ts
â”‚   â”œâ”€â”€ seed.ts
â”‚   â”œâ”€â”€ storage.ts
â”‚   â””â”€â”€ vite.ts
â”œâ”€â”€ shared/
â”‚   â””â”€â”€ schema.ts
â”œâ”€â”€ tailwind.config.ts
â”œâ”€â”€ tsconfig.json
â””â”€â”€ vite.config.ts
```

---

## B. ğŸ§  Architectural Understanding

**Architecture Style:** Full-stack monorepo (TypeScript) with clear frontend/backend separation.

**Layered Flow:**

* **Client Layer (`client/`)**
  React + Vite SPA responsible for UI, routing, and user interaction.

* **API Layer (`server/routes.ts`)**
  Central routing layer exposing REST endpoints.

* **Service Layer (`server/storage.ts`, `carbonCalculation.ts`, `blockchain.ts`)**
  Business logic abstraction, domain calculations, and ledger-style transaction handling.

* **Persistence Layer (`server/db.ts`, `shared/schema.ts`)**
  Database access through Drizzle ORM with shared type-safe schema.

* **Shared Contract (`shared/schema.ts`)**
  Single source of truth for data models and validation across frontend and backend.

**Data Flow:**

```
Client (React)
   â†’ API (Express Routes)
      â†’ Services (Business Logic)
         â†’ Persistence (Drizzle ORM)
            â†’ PostgreSQL / Supabase
```

---

## C. âš™ï¸ Tech Stack Inference

### Frontend

* React (TypeScript)
* Vite
* TailwindCSS
* Shadcn/UI
* Custom hooks architecture

### Backend

* Node.js
* Express
* TypeScript
* Custom auth layer (`auth.ts`)
* Modular services (`storage.ts`, `carbonCalculation.ts`)

### Database

* PostgreSQL-compatible
* Drizzle ORM
* Zod schema validation

### Infrastructure & Tooling

* Vite build system
* Tailwind + PostCSS
* Drizzle migrations
* Supabase integration references

### Domain Systems

* Carbon credit calculation engine
* Blockchain-style ledger abstraction (`blockchain.ts`)
* Object storage abstraction (`objectStorage.ts`)

---

## D. ğŸ” Domain & Feature Signals

**Domain:** Blue Carbon Ecosystem Platform

**Focus Areas:**

* Mangrove ecosystems
* Wetlands
* Salt marsh conservation
* Blue carbon sequestration

**Implied Actors:**

* Users (project creators)
* Verifiers (validators)
* Admins (governance)

**Core Platform Capabilities:**

* Project onboarding
* Carbon sequestration calculation
* Verification workflows
* Ledger-based transaction tracking
* Tokenized credit modeling
* Storage of environmental evidence

---

## E. âš ï¸ Architectural Observations (No Fixes)

* Dual auth signals: presence of `SUPABASE_SETUP.md` vs custom `auth.ts` logic indicates mixed authentication direction.
* Blockchain abstraction is logical/ledger-based, not decentralized.
* Object storage is abstracted but environment-specific.
* Attached assets folder indicates heavy AI-assisted design iteration history.
* System is evolving from prototype architecture toward production structure.
* Strong domain separation already exists (calculation, ledger, storage, auth).

---

## F. System Maturity Assessment

**Current State:** Advanced prototype / early production architecture

**Characteristics:**

* Strong modular separation
* Clear domain boundaries
* Type-safe data modeling
* Monorepo efficiency
* AI-assisted design artifacts

This system is structurally suitable for transition into a production-grade platform with controlled hardening, security policies, and deployment pipelines.
